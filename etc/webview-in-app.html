<script>
var _request_body_keys = [ 'session_id', 'identity_id', 'os', 'hardware_id', 'ios_vendor_id', 'hardware_id_type', 'is_hardware_id_real', 'os_version', 'model', 'branch_key', 'device_fingerprint_id', 'sdk', 'google_advertising_id' ];
function _parseQuery() {
	var query_string = window.location.search.substring(1);
	var vars = query_string.split('&');
	var query = {}
	for (var i = 0; i < vars.length; i++) {
		var pair = vars[i].split('=');
		query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);
	}
	return query;
}
window.branchWebviewInAppPurchase = function(revenue, currency) {
	
	var request_body = { event: 'purchase', commerce_data: { revenue: revenue } };
	if (currency) { request_body.commerce_data.currency = currency; }
	var query = _parseQuery();
	for (var k in _request_body_keys) {
		if (query.hasOwnProperty(k)) {
			request_body[k] = query[k];
		}
		else {
			console.log('\n\n no match for ' + k)
		}
	}

	console.log('request_body:', JSON.stringify(request_body))
}
</script>



<script>
window.onload = function() {
	alert('hi');
	window.branchWebviewInAppPurchase('heh')
}
</script>

<meta name="viewport" content="width=device-width, initial-scale=1">
<body>
hi
</body>